#!/bin/bash

update () {
  rm -rf "$HOME/.$1"
  ln -s "$PWD/$1" "$HOME/.$1"
}

update bashrc
update bash_profile
update inputrc
update gvimrc
update vimrc
update tmux.conf
update gitignore
update gitconfig
update R
update Rprofile
update sbcl_completions

rm -rf "$HOME/scripts"
ln -s "$PWD/scripts" "$HOME/scripts"

if [[ "$1" == "--vundle" ]]; then
  [[ -d ~/.vim/eclim/ ]] && ECLIM=true
  if [[ "$ECLIM" ]]; then
    mv ~/.vim/eclim /tmp/eclim
  fi
  rm -rf ~/.vim
  mkdir -p ~/.vim/bundle
  git clone 'https://github.com/gmarik/vundle' ~/.vim/bundle/vundle
  vim +BundleInstall
  ln -s "$(readlink -m "$PWD"/snippets)" ~/.vim
  rm ~/.vim/bundle/LaTeX-Suite-aka-Vim-LaTeX/ftplugin/latex-suite/templates/{beamer,article}.tex
  ln -s "$PWD"/latex-templates/article.tex ~/.vim/bundle/LaTeX-Suite-aka-Vim-LaTeX/ftplugin/latex-suite/templates/article.tex
  ln -s "$PWD"/latex-templates/beamer.tex ~/.vim/bundle/LaTeX-Suite-aka-Vim-LaTeX/ftplugin/latex-suite/templates/beamer.tex
  if [[ "$ECLIM" ]]; then
    mv /tmp/eclim ~/.vim/eclim 
  fi
fi

[[ ! -d ~/.fonts ]] && mkdir -p ~/.fonts
[[ ! -f ~/.fonts/Monaco_Linux.ttf ]] && cp "$PWD"/Monaco_Linux.ttf ~/.fonts

exit 0
